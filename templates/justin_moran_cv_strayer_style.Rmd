---
title: "Justin Moran's CV"
author: Justin Moran
date: "`r Sys.Date()`"
params:
  pdf_mode:
    value: true
output:
  pagedown::html_resume:
    css: ['../datadrivencv/dd_cv.css', 'resume']
    self_contained: true
---

```{r, include=FALSE}
knitr::opts_chunk$set(
  results='asis', 
  echo = FALSE
)

source("../datadrivencv/CV_printing_functions.R")

# Read in all data and initialize a CV printer object
CV <- create_CV_object(
  data_location = "https://docs.google.com/spreadsheets/d/1Kd-qv6oxFzKKzvim2TdFYXslB398zdJ6tKX1Dur064M",  
  pdf_mode = params$pdf_mode
)

```


```{r}
# When in pdf export mode the little dots are unaligned, so fix that with some conditional CSS.
if(params$pdf_mode) {
    cat("
<style>
:root{
  --decorator-outer-offset-left: -6.5px;
}
</style>")
}
```


Aside
================================================================================

```{r}
# Cool network logo placeholder - would show interactive network of positions
# For now, we'll use a text-based logo
cat("
<div style='text-align: center; padding: 20px; font-size: 1.2em; color: #007bff;'>
  <strong>JUSTIN MORAN</strong><br>
  <span style='font-size: 0.8em; color: #666;'>Research Scientist â€¢ Cognitive Psychology</span>
</div>
")
```


```{r}
# Removed placeholder text - no longer needed
```

Contact {#contact}
--------------------------------------------------------------------------------

```{r}
CV |> print_contact_info()
```



Technical Skills {#skills}
--------------------------------------------------------------------------------

```{r}
CV |> print_skill_bars()
```



Disclaimer {#disclaimer}
--------------------------------------------------------------------------------

Made with [**datadrivencv**](https://nickstrayer.me/datadrivencv). 

The source code is available on [GitHub](https://github.com/kyaneos/cv).

Last updated on `r Sys.Date()`.



Main
================================================================================

Justin Moran {#title}
--------------------------------------------------------------------------------

```{r}
# Note the assignment back to CV. This is so the link stripping works properly in PDF mode
CV <- print_text_block(CV, "intro") 
```



Currently {data-icon=laptop}
--------------------------------------------------------------------------------

```{r}
CV <- CV |> print_section('currently')
```



Education and Training {data-icon=graduation-cap data-concise=true}
--------------------------------------------------------------------------------

```{r}
CV <- CV |> print_section('education')
```



Manuscripts {data-icon=book}
--------------------------------------------------------------------------------
::: aside
```{r}
if(params$pdf_mode){
  cat("Publications and manuscripts.")
} else {
  cat("Publications and manuscripts.")
}
```
:::

```{r}
# Check if manuscripts section exists in data, otherwise show hardcoded entry
manuscript_data <- dplyr::filter(CV$entries_data, section == 'manuscripts')
if (nrow(manuscript_data) > 0) {
  # Group manuscripts by year and create timeline structure
  manuscript_data <- manuscript_data |>
    dplyr::mutate(
      # Extract year from end date, or use "in prep" if no date
      year = ifelse(is.na(end) | end == "N/A", "in prep", end)
    ) |>
    dplyr::arrange(desc(year)) # Sort with most recent first
  
  # Get unique years to avoid duplicates
  unique_years <- unique(manuscript_data$year)
  
  for(yr in unique_years) {
    year_manuscripts <- manuscript_data |> dplyr::filter(year == yr)
    
    # Create timeline entry for this year
    cat("
### ", yr, "

N/A

N/A

N/A

")
    
    # Add all manuscripts for this year as regular text
    for(i in 1:nrow(year_manuscripts)) {
      cat(year_manuscripts$title[i], "\n")
      
      # Add description if it exists and is not empty/NA
      if(!is.na(year_manuscripts$description_bullets[i]) && 
         year_manuscripts$description_bullets[i] != "" && 
         year_manuscripts$description_bullets[i] != "N/A") {
        cat("\n*", year_manuscripts$description_bullets[i], "*\n")
      }
      
      cat("\n")
    }
  }
} else {
  # Hardcoded manuscript with timeline structure
  cat("
### 2025

N/A

N/A

N/A

Moran, J., Jolly, E. (in prep). Transmission and Transformation of Social Reputations in Serial Reproduction.

*Research on how social reputations change through transmission chains*

")
}
```


Open Software {data-icon=code}
--------------------------------------------------------------------------------
::: aside
```{r}
if(params$pdf_mode){
  cat("Software projects focused on research tools, educational applications, and other miscellaneous projects.")
} else {
  cat("Software projects focused on research tools, educational applications, and other miscellaneous projects.")
}
```
:::

```{r}
# Custom template for software section (no location)
software_template <- "
### {title}

{institution}

N/A

{timeline}

{description_bullets}
\n\n\n"

CV <- CV |> print_section('software', glue_template = software_template)
```

```{r}
print_links(CV)
```