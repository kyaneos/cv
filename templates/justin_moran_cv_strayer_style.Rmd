---
title: "Justin Moran's CV"
author: Justin Moran
date: "`r Sys.Date()`"
params:
  pdf_mode:
    value: true
output:
  pagedown::html_resume:
    css: ['../datadrivencv/dd_cv.css', 'resume', '../custom.css']
    self_contained: true
---

```{r, include=FALSE}
knitr::opts_chunk$set(
  results='asis', 
  echo = FALSE
)

source("../datadrivencv/CV_printing_functions.R")

# Read in all data and initialize a CV printer object
CV <- create_CV_object(
  data_location = "https://docs.google.com/spreadsheets/d/1Kd-qv6oxFzKKzvim2TdFYXslB398zdJ6tKX1Dur064M",  
  pdf_mode = params$pdf_mode
)

```



```{r}
# When in pdf export mode the little dots are unaligned, so fix that with some conditional CSS.
if(params$pdf_mode) {
    cat("
<style>
:root{
  --decorator-outer-offset-left: -6.5px;
}
</style>")
}
```


Aside
================================================================================

Contact {#contact}
--------------------------------------------------------------------------------

```{r}
CV |> print_contact_info()
```



```{r}
# Empty positioning block 1
```



```{r}
# Empty positioning block 2 - moves Technical Skills down a smidge
```



Technical Skills {#skills}
--------------------------------------------------------------------------------

```{r}
CV |> print_skill_bars()
```



Disclaimer {#disclaimer}
--------------------------------------------------------------------------------

Made with [**datadrivencv**](https://github.com/nstrayer/datadrivencv/). 

The source code is available on [GitHub](https://github.com/kyaneos/cv).

Last updated on `r Sys.Date()`.



Main
================================================================================

Justin Moran {#title}
--------------------------------------------------------------------------------

```{r}
# Note the assignment back to CV. This is so the link stripping works properly in PDF mode
CV <- print_text_block(CV, "intro") 
```



Currently {data-icon=laptop}
--------------------------------------------------------------------------------

```{r}
CV <- CV |> print_section('currently')
```



Education and Training {data-icon=graduation-cap data-concise=true}
--------------------------------------------------------------------------------

```{r}
CV <- CV |> print_section('education')
```

Manuscripts {data-icon=book}
--------------------------------------------------------------------------------
::: aside
```{r}
if(params$pdf_mode){
  cat("Publications and manuscripts.")
} else {
  cat("Publications and manuscripts.")
}
```
:::
```{r}
# Custom manuscripts section grouped by year
manuscript_data <- dplyr::filter(CV$entries_data, section == 'manuscripts')
if (nrow(manuscript_data) > 0) {
  # Extract year for grouping
  manuscript_data <- manuscript_data |>
    dplyr::mutate(
      year = ifelse(is.na(end) | end == "N/A", "in prep", end)
    ) |>
    dplyr::arrange(desc(year))
  
  # Get unique years
  unique_years <- unique(manuscript_data$year)
  
  for(yr in unique_years) {
    year_manuscripts <- manuscript_data |> dplyr::filter(year == yr)
    
    # Create one timeline entry per year
    cat("
### 

N/A

N/A

", yr, "

")
    
    # Add all manuscripts for this year
    for(i in 1:nrow(year_manuscripts)) {
      cat(year_manuscripts$title[i])
      
      # Add description if it exists
      if(!is.na(year_manuscripts$description_bullets[i]) && 
         year_manuscripts$description_bullets[i] != "" && 
         year_manuscripts$description_bullets[i] != "N/A") {
        cat("

*", year_manuscripts$description_bullets[i], "*")
      }
      
      if(i < nrow(year_manuscripts)) cat("

")
    }
    
    cat("

")
  }
}
```


Open Software {data-icon=code}
--------------------------------------------------------------------------------
::: aside
```{r}
if(params$pdf_mode){
  cat("Software projects focused on research tools, educational applications, and other miscellaneous projects.")
} else {
  cat("Software projects focused on research tools, educational applications, and other miscellaneous projects.")
}
```
:::

```{r}
# Custom template for software section (with location for links)
software_template <- "
### {title}

{institution}

{loc}

{timeline}

{description_bullets}
\n\n\n"

CV <- CV |> print_section('software', glue_template = software_template)
```

```{r}
print_links(CV)
```